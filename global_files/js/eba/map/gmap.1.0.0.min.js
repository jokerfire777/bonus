$.fn.gmap=function(a){var b={zoom:12,mapTypeId:"roadmap",gmKey:"AIzaSyC9u-CXg_EbSfupSZOCfvtbW7wozRRjPUg",data:[],center:[37.7912976,-122.3959313],country:"US",global:ebates||{}},c=$.extend(true,b,a);c.global.gmap=c.global.gmap||{};return this.each(function(){var d=this;ebates.js.require("https://maps.googleapis.com/maps/api/js?key="+c.gmKey,function(){var e={zoom:c.zoom,center:new google.maps.LatLng(c.center[0],c.center[1]),mapTypeId:c.mapTypeId},g=new google.maps.Map(d,e),f=new google.maps.InfoWindow({content:""});c.global.gmap.geocoder=c.global.gmap.geocoder||new google.maps.Geocoder();c.zip&&c.global.gmap.geocoder.geocode({componentRestrictions:{country:c.country,postalCode:c.zip}},function(i,h){if(h===google.maps.GeocoderStatus.OK){g.setCenter(new google.maps.LatLng(i[0]["geometry"]["location"].lat(),i[0]["geometry"]["location"].lng()))}});google.maps.event.addListenerOnce(g,"tilesloaded",function(){$(d).trigger("gmap-loaded")});$.each(c.data,function(k,l){var j=new google.maps.LatLng(l.lat,l.lng),h=new google.maps.Marker({map:g,position:j,icon:{url:c.icon,size:new google.maps.Size(22,22),scaledSize:new google.maps.Size(22,22)}});google.maps.event.addListener(h,"mouseover",function(){f.setContent(l.markerInfo);f.open(g,h)});c.data.length===1&&google.maps.event.trigger(h,"click")})})})};