ebates.js.require(ebates.src.suggest.generic,function(){var e,t="?fl=d:storeId,n:storeName,c:storeCashBack,e:enableStoreOnlySearch&targetSet="+$("#targetcashbackset").val()+"&fq=status:2",s=$("#store_name"),a=$("#frmStoreSearch2"),r=function(e){return jQuery.trim(e).replace(/\W+/g,"").toLowerCase()},n={store:23078,product:"23106",form:"23111"},c={input:s,classes:{cont:"ac_results pcs-ac-results"},prepQ:r,times:{inputThrottle:300,close:500},suggests:[{caches:{exact:{get:function(){return!0}}},prepQ:function(e){return e.trim().replace(/[^\w\s&'$.]+/g,"").replace(/^\W+/g,"").replace(/\s+/g," ").toLowerCase()},classes:{section:"button-suggest-cont"},clickEvent:"click",click:function(e){var t=$("a",this).attr("href"),a={et:"autocomplete_button_click",ssi:ebates.search.getSearchSessionId(!0),itn:"Cash Back Button",itp:0,dur:t,q:s.val()};e.preventDefault(),ebates.search.sendStats(a,jQuery.proxy(ebates.search.go,null,t,""))},show:function(t,s){function a(e,t){function s(e){return e.length>=3?r.find(function(s){return"strict"===t&&s===e||"strict"!=t&&s.indexOf(e)>=0}):null}return e.replace(/\s{2,}/g," ").split(" ").some(s)}var r=["cash","button","install","extension","browser","chrome","firefox","edge","safari"],n=this,c=e.find("ul."+n.classes.section),o="",i="/button.htm?query="+s;a(s)&&(o='<li class="suggestion"><a href="'+i+'" data-click-category="Button" data-click-action="Search Suggest Click" data-click-label="'+s+'"><span class="store-name">Cash Back Button Extension</span><img class="button-suggest-icon" src="'+ebates.stats.assetHost+'/static/svg/rakuten/rakuten-lettermark-gradient.svg"/></a></li>',$(document).trigger("stats",{data:["send","event","Button","Search Suggest View",s]})),c.html(o),a(s,"strict")?0!=c.index()&&c.insertBefore(e.find("ul.store-suggest-cont")):1!=c.index()&&c.insertBefore(e.find("ul.prod-suggest-cont"))}},{ajax:{url:"../https@/"+ebates.suggestUrl+t},classes:{section:"store-suggest-cont"},caches:{full:new ebates.cache(40),exact:new ebates.cache(50),empty:new ebates.cache(100)},prepQ:function(e){return e.trim().replace(/[^\w\s&'$.]+/g,"").replace(/^\W+/g,"").replace(/\s+/g," ").toLowerCase()},result:{rows:5},data:{navId:n.store},click:function(){var t=$(this),a=t.attr("data-id");return s.trigger("suggest-wait"),jQuery.get("ajax/suggest/link.htm",{storeId:t.data("id"),q:e.attr("data-q"),position:t.index()+1,nav_id:n.store},function(e){var r=jQuery.trim(e),c={et:"autocomplete_store_click",ssi:ebates.search.getSearchSessionId(!0),itn:t.find(".s-name").text(),mid:a,itp:t.index(),dur:r,q:s.val()};ebates.search.sendStats(c,jQuery.proxy(ebates.search.go,null,r,n.store))},"text"),!1},show:function(t,a){var r,n,c=this,o=[],i=e.find("ul."+c.classes.section),l=function(e,t){var s=new RegExp("("+e.replace(/\\/g,"\\s+")+")","gi");return t.replace(s,'<span class="prox-b">$1</span>')},u=s.parent();if(setTimeout(function(){u.removeClass("loading")},0),t.cat&&t.cat.one&&t.cat.one.length){for(r=0;r<t.cat.one.length;r++)"13692"===t.cat.one[r].d&&(t.cat.one[r].c=lyftCB||t.cat.one[r].c),("16269"!==t.cat.one[r].d||ebates.uberFlag)&&o.push('<li class="suggestion',t.cat.one[r].e&&" direct"||"",'" data-id="',t.cat.one[r].d,'"><span class="f-16 s-name store-name">',t.cat.one[r].n,'</span><span class="cashback prox-b f-16">',t.cat.one[r].c,"</span></li>");i.html(o.join("")).append('<li class="see-all f-16"><a href="/search/stores.htm?store_name='+ebates.search.queryFilter(s.val())+'&all=1">See all store results </a></li>'),e.show().attr("data-q",a),a===s.attr("data-q")&&(s.removeAttr("data-q"),n=jQuery.Event("keydown"),n.which=13,n.keyCode=13,s.trigger(n)),i.find(".s-name").each(function(){$(this).html(l(a,$(this).text()))})}else this.removeS(c.classes.section);return $(".store-suggest-cont li").length<2?$(".store-suggest-cont").addClass("hide"):$(".store-suggest-cont").removeClass("hide"),!0}},{ajax:{url:"../https@ebates.api.search-suggest.rakuten.com/autocomplete/v1/us_ebates_ac.list_ac@sid=us_ebates_ac_001&ci=2&format=jsonp",jsonp:"cb"},classes:{section:"prod-suggest-cont"},clickEvent:"click",result:{rows:5,rowsParam:"h",map:function(e){var t={};return e&&"OK"===e.status&&e.query===s.val()?(t.size=e.suggestions.length,t.result=e,t):[]}},caches:{exact:new ebates.cache(50),empty:new ebates.cache(100)},prepQ:function(e){return e},show:function(t,s){var a,r,n,c,o=this,i=[],l=[],u=0,d=e.find("ul."+o.classes.section),g='<li class="product-see-all see-all f-16"><a class="nohover" href="/compare/prices/search.htm?keywords='+encodeURIComponent(s)+"&acT="+encodeURIComponent(s)+'&all=1&ac=1&suggest=1">See all product results</a></li>',h=t.result.suggestions,p=function(e,t){var s=new RegExp("("+e.replace(/\\/g,"\\s+")+")","gi");return t.replace(s,'<span class="prox-b">$1</span>')};for(a=0;a<h.length;a++)n=h[a].terms,c=encodeURIComponent(n),r=h[a].cid?h[a].cid[0]:"",r&&u<2?(i.push('<li class="suggestion f-16"><a href="/compare/prices/search.htm?keywords=',c,"&category_id=",r,"&all=1&ac=1&acT="+encodeURIComponent(s)+'&suggest=1" class="block nohover"><span class="f-16 f-gry s-prod-name">',n,'</span><span class="f-gry-dk-8"> in ',t.result.cm[r],"</span></a></li>"),u++):l.push('<li class="suggestion"><a href="/compare/prices/search.htm?keywords='+c+"&acT="+encodeURIComponent(s)+'&all=1&ac=1&suggest=1" class="block nohover"><span class="f-16 f-gry s-prod-name">'+n+"</span></a></li>");return d.html(i.join("")+l.join("")).append(g),e.show(),d.find(".s-prod-name").each(function(){$(this).html(p(s,$(this).text()))}),!0},click:function(){var e=$("a",this),t=e.attr("href"),r={et:"autocomplete_product_click",ssi:ebates.search.getSearchSessionId(!0),itn:e.find(".s-prod-name").text(),itp:$(this).index(),dur:t,q:s.val()};return a.addClass("loading"),ebates.search.sendStats(r,jQuery.proxy(ebates.search.go,null,t,n.product)),!1}}]};a.off(),s.before('<span class="fa-spinner fa-pulse absolute hide f-grn"></span>'),a.find("input[name='navigation_id']").val(n.form),ebates.suggest(c),e=s.next(".ac_results"),$("#store_name").on("keydown",function(t){var a,c,o,i,l,u;if(13===t.keyCode){if(t.preventDefault(),a={et:"search_form_enter",ssi:ebates.search.getSearchSessionId(!0),q:s.val()},$(document).trigger("set-nav-id",[ebates.stats.parentNavId+"|"+n.form]),u=s.val(),""===u.trim()||u.indexOf("%")>=0)return!1;if(l=".store-name",c=null,!e.is(":visible"))return $(this).attr("data-q",s.val()),!0;if(o=e.find("li.selected").filter(":visible"),o.length)return!1;i=r(s.val()),e.find("li.direct").each(function(){var e=$(this);if(r($(l,e).text())===i)return c=e,!1}),ebates.search.sendStats(a,jQuery.proxy(function(){if(e.find("ul:first").hasClass("button-suggest-cont"))e.find("ul:first a").click();else{if(c)return c.trigger("mousedown"),!1;$("#frmStoreSearch2").trigger("submit",[!0])}},null))}}),$(".h-search-form .button").on("click",function(e){var t={et:"search_button_click",ssi:ebates.search.getSearchSessionId(!0),q:s.val()};e.preventDefault(),$(document).trigger("set-nav-id",[ebates.stats.parentNavId+"|"+n.form]),ebates.search.sendStats(t,jQuery.proxy(function(){$("#frmStoreSearch2").trigger("submit",[!0])},null))}),$("body").on("click",".prod-suggest-cont .see-all",function(){var e={et:"autocomplete_product_seeall_click",ssi:ebates.search.getSearchSessionId(!0),dur:$(this).attr("href"),q:s.val()};$(document).trigger("set-nav-id",[ebates.stats.parentNavId+"|"+n.product]),ebates.search.sendStats(e)}),s.on("pcs-search-event",function(e,t){var a;"be-response-success"===t.action&&r(t.q)===r(s.attr("data-q"))&&"OK"===t.response.status&&t.response.suggestions&&0===t.response.suggestions.length&&(a=jQuery.Event("keydown"),a.which=13,a.keyCode=13,s.trigger(a),setTimeout(function(){$("#frmStoreSearch2").trigger("submit",[!0])},0))}),["search/stores.htm","compare/prices/search.htm","search/special.htm"].indexOf(location.pathname)>=0&&$("#store_name").on("keydown",function(e){var t;13!==e.keyCode||s.val()!==ebates.param.get("keywords")&&s.val()!==ebates.param.get("store_name")||(e.preventDefault(),t={et:"search_form_enter",ssi:ebates.search.getSearchSessionId(!0),q:s.val()},ebates.search.sendStats(t,jQuery.proxy(function(){$("#frmStoreSearch2").trigger("submit",[!0])},null)))}),$(document).trigger("stats",{data:["send","event","Global Nav","Header Search Focus",""],map:{optimizely:"header_search_focus"}}),$(".h-search-form").one("input","#store_name",function(){$(document).trigger("stats",{data:["send","event","Global Nav","Header Search Insert Text",""],map:{external:{ec:"Global Nav",ea:"Header Search Insert Text"},optimizely:"header_search_insert_text"}})})});
//# sourceMappingURL=desktop_product_search-bbb6a1f315.js.map
